<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiGuardia</title>
    <link rel="stylesheet" href="/styles - css/styleIndxAdmin.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="/assets/img/icon.MiGuardia.jpg" alt="MiGuardia Logo">
            <h1>MiGuardia</h1>
        </div>
        <nav>
            <ul>
                <li><a href="#">Inicio</a></li>
                <li><a href="#">Contactanos</a></li>
                <li><a href="#">Sobre miGuardia</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- Sección de información de los hospitales -->
        <section class="hospital-info">
            <div><h2>Hospitales Disponibles</h2></div>
            <div class="cards" id="hospitalCards">
                <!-- Las tarjetas de hospitales se inyectarán dinámicamente aquí -->
            </div>
        </section>
    
        <!-- Sección de comentarios/reseñas -->
        <section class="feedback">
            <div class="feedback-card" id="feedbackSection">
                <!-- Las reseñas/comentarios se inyectarán dinámicamente aquí -->
            </div>
        </section>
    
        <!-- Sección para agregar comentarios -->
        <section class="comments">
            <h3>Deja tu comentario</h3>
            <textarea></textarea>
            <button>Enviar</button>
        </section>
    </main>
    

    <footer>
        <div class="contacts">
            <p>SAME: 555-000-555</p>
            <p>Bomberos: 000-555-000</p>
        </div>
        <div class="footer-nav">
            <ul>
                <li><a href="#">Nosotros</a></li>
                <li><a href="#">Acceso de Usuarios</a></li>
                <li><a href="#">Login</a></li>
            </ul>
        </div>
    </footer>

    <script>
        // Función para cargar los hospitales
        function loadHospitals() {
            fetch('/api/guards')
                .then(response => response.json())
                .then(hospitals => {
                    const hospitalCards = document.getElementById('hospitalCards');
                    hospitalCards.innerHTML = '';  // Limpiar contenido previo
        
                    hospitals.forEach(hospital => {
                        const card = document.createElement('div');
                        card.classList.add('card', hospital.state === 'Ocupado' ? 'saturated' : 'normal');
                        
                        card.innerHTML = `
                            <p>${hospital.typeguard}</p>
                            <p>Piso: ${hospital.piso}</p>
                            <p class="status">${hospital.state}</p>
                        `;
                        hospitalCards.appendChild(card);
                    });
                })
                .catch(error => console.error('Error al cargar hospitales:', error));
        }
        
        // Función para cargar comentarios/reseñas
        function loadFeedback() {
            fetch('/api/comments')
                .then(response => response.json())
                .then(comments => {
                    const feedbackSection = document.getElementById('feedbackSection');
                    feedbackSection.innerHTML = '';  // Limpiar contenido previo
        
                    comments.forEach(comment => {
                        const feedbackCard = document.createElement('div');
                        feedbackCard.classList.add('feedback-card');
                        
                        const createdAt = new Date(comment.createdAt.$date).toLocaleString();
                        feedbackCard.innerHTML = `
                            <p>"${comment.text}"</p>
                            <p class="name">${comment.name}</p>
                            <p class="description">${createdAt}</p>
                        `;
                        feedbackSection.appendChild(feedbackCard);
                    });
                })
                .catch(error => console.error('Error al cargar comentarios:', error));
        }
        
        // Llamar a las funciones para cargar los datos al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            loadHospitals();  // Cargar hospitales
            loadFeedback();   // Cargar comentarios/reseñas
        });
        </script>
        

</body>
</html>
